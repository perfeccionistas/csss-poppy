/* ==================== BASE / GLOBAL ==================== */
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  overflow: hidden;
  font-family: 'Jost', sans-serif;
}
:root { --vh: 100vh; }
@supports (height: 100svh){ :root { --vh: 100svh; } }

/* ===== Default variables (desktop) ===== */
:root{
  --panel-left: 110px;
  --panel-side-gap: 16px;
  --panel-w: calc(100% - var(--panel-left) - var(--panel-side-gap));
  --col-gap: 40px;
  --image-max: 640px;
  --text-max: 270px;
  --video-max: 400px;
  --text-gap: 72px;
  --h2-size: 72px;
  --desc-size: 16px;
  --sub-size: 16px;
  --video-top-margin: 50px;

  --obj-left: 30px;
  --obj-gap: 330px;
  --obj-size: 60px;
  --obj-font: 24px;

  --color-gap: 50px;
}

/* ==================== POPUP PANEL ==================== */
.popup-panel{
  position: absolute;
  left: var(--panel-left);
  top: 0;
  width: var(--panel-w);
  height: 100%;
  background: linear-gradient(to bottom, rgba(232,230,230,0.8), rgba(232,230,230,0.4));
  border: 1px solid rgba(0,0,0,0.3);
  box-shadow: 0 1px 8px rgba(0,0,0,0.25);
  backdrop-filter: blur(1px) saturate(100%);
  -webkit-backdrop-filter: blur(1px) saturate(100%);
  transform: scaleX(0);
  transform-origin: left center;
  opacity: 0;
  transition: transform .4s ease, opacity .4s ease;
  z-index: 1001;
  padding: 0;
  display: flex;
  flex-direction: column;
  border-radius: 12px;
  pointer-events: none;
}
.popup-panel.active{
  transform: scaleX(1);
  opacity: 1;
  pointer-events: auto;
}
.popup-header-wrapper{ width: 100%; padding: 20px 40px 0; box-sizing: border-box; }
.popup-header{ display: flex; justify-content: space-between; align-items: flex-start; gap: 40px; }
.popup-description{ font-size: var(--desc-size); max-width: 420px; line-height: 1.5; text-align: left; }
.popup-title{ flex: 1; display: flex; justify-content: flex-end; }
.popup-title-inner{ margin-top: 8px; text-align: left; }
.popup-title-inner h2{ font-size: var(--h2-size); font-weight: bold; margin: 0; }
.popup-title-inner p{ font-size: var(--sub-size); margin: 4px 0 0; }
.popup-divider{ height: 1px; background-color: black; width: 100%; margin: 24px 0; flex-shrink: 0; }
.popup-body{ flex: 1; display: flex; padding: 0 40px 40px; box-sizing: border-box; flex-direction: column; }
.popup-body-content{
  display: grid;
  grid-template-columns: minmax(0, 640px) minmax(0, 1fr) minmax(0, 400px);
  align-items: start;
  gap: var(--col-gap);
  flex: 1;
  overflow: hidden;
}

/* ==================== LEFT IMAGE ==================== */
.popup-image-wrapper{ position: relative; z-index: 0; overflow: hidden; max-width: var(--image-max); }
.popup-image-wrapper::before{
  content:""; position:absolute; inset:0; z-index:-1;
  background-image: repeating-linear-gradient(to bottom, rgba(232,230,230,.06) 0px, rgba(232,230,230,.06) 2px, transparent 2px, transparent 6px);
  background-size: 100% 6px;
  box-shadow: inset 0 0 20px rgba(255,255,255,.08), inset 0 0 40px rgba(255,255,255,.05);
  pointer-events:none;
}
.popup-image-wrapper img{ max-width: var(--image-max); width: 100%; object-fit: contain; }
.glow-image{
  filter: drop-shadow(0 0 2px rgba(0,0,0,.2)) drop-shadow(0 0 4px rgba(0,0,0,.15)) drop-shadow(0 0 8px rgba(0,0,0,.1));
}

/* ==================== CENTER TEXT ==================== */
.popup-text-wrapper{
  max-width: min(var(--text-max), 22vw);
  font-size: clamp(12px, 1vw, 18px);
  line-height: 1.5;
  word-break: break-word; overflow-wrap: break-word;
  display: flex; flex-direction: column; justify-content: flex-start;
  padding-top: 0; padding-bottom: 25px;
  gap: var(--text-gap); z-index: 10; position: relative; color: black;
}
.text-block{ font-size: inherit; line-height: inherit; color: black; position: relative; z-index: 10; }
.text-block.bold{ font-weight: bold; }
.text-block.bold1{ font-size: clamp(11px, .9vw, 14px); font-weight: bold; }

/* ==================== RIGHT VIDEO + COLORS ==================== */
.popup-video-wrapper{
  display:flex; flex-direction:column; align-items:center; justify-content:flex-start;
  margin-top: var(--video-top-margin); gap:20px; margin-right:37px;
}
.popup-video-mask{
  width: clamp(150px, 20vw, var(--video-max));
  aspect-ratio: 1 / 1;
  border-radius: 50%; overflow: hidden; border: 1px solid black;
  display:flex; align-items:center; justify-content:center; position:relative;
}
.popup-video-mask video{ width:500px; height:500px; object-fit:cover; transform: translate(-10px,-40px); display:none; }
.popup-video-mask video.active{ display:block; }

.color-group{ display:flex; flex-direction:column; align-items:center; gap:8px; width:100%; margin-top:-6px; position:relative; }
.color-label{ font-family:'Jost', sans-serif; font-size:14px; font-weight:bold; color:black; align-self:flex-start; margin-left:10px; margin-bottom:-2px; }
.popup-video-buttons{ display:flex; gap: var(--color-gap); justify-content:center; }
.video-btn{
  position:relative; width:60px; height:60px; border-radius:50%; overflow:hidden;
  padding:0; background:none; cursor:pointer; transition: box-shadow .2s ease;
}
.video-btn img{ pointer-events:none; width:100%; height:100%; object-fit:cover; display:block; transition: filter .3s ease; }
.video-btn:hover img{ filter: brightness(.75); }
.video-btn:hover::after{ content:""; position:absolute; inset:0; border-radius:50%; box-shadow: inset 0 0 5px 2px black; pointer-events:none; }

/* === PLACE button */
.place-btn-wrapper{ margin-top: 36px; display: flex; justify-content: center; width: 100%; }
.place-btn{
  padding:12px 36px; font-size:16px; font-weight:600; font-family:'Jost', sans-serif;
  color:black; background: transparent; border: none; border-radius:28px;
  box-shadow:0 2px 10px rgba(0,0,0,.1); cursor:pointer; transition: box-shadow .2s ease; display:block; margin-inline:auto;
}
.place-btn:hover{ box-shadow: inset 0 0 5px 2px black; }
.place-btn:focus-visible{ outline: 2px solid rgba(0,0,0,.5); outline-offset: 2px; }

/* ==================== LEFT NAVIGATOR ==================== */
.object-button-column{
  position:absolute; top:50%; left: var(--obj-left); transform: translateY(-50%);
  display:flex; flex-direction:column; gap: var(--obj-gap);
  z-index:90; opacity:0; transition: opacity 1s ease; pointer-events:auto;
}
.object-btn{
  width: var(--obj-size); height: var(--obj-size); border-radius:50%; border:none;
  font-size: var(--obj-font); background-color:#e8e8e6; box-shadow:0 2px 10px rgba(0,0,0,.1);
  display:flex; align-items:center; justify-content:center; cursor:pointer;
}
.object-btn:hover{ box-shadow: inset 0 0 5px 2px black; }

/* ==================== DOT GRID / TYPEWRITER ==================== */
.dot-grid{
  display:grid; grid-template-columns:repeat(auto-fill,10px); grid-template-rows:repeat(auto-fill,10px);
  opacity:0; pointer-events:none; position:absolute; top:0; left:0; width:100vw; height:var(--vh); z-index:0; transition: opacity 2s;
}
.dot-cell{ width:10px; height:10px; display:flex; align-items:center; justify-content:center; }
.dot-visual{ width:6px; height:6px; background-color:#000; border-radius:50%; opacity:.7; }

.center-wrapper{
  position:absolute; top:0; left:0; width:100vw; height:var(--vh);
  display:flex; flex-direction:column; align-items:center; justify-content:center; z-index:10; pointer-events:none; gap:20px;
}
.typewriter-text-p{ font-size:20px; text-align:center; white-space:nowrap; overflow:hidden; max-width:90vw; }
.image-sequence-p{ display:none; position:relative; width:500px; height:500px; max-width:80vw; max-height:80vh; overflow:hidden; }
.image-sequence-p img{
  position:absolute; top:50%; left:50%; width:100%; height:100%; object-fit:contain; transform:translate(-50%,-50%);
  opacity:0; transition: opacity .6s ease-in-out;
}

/* ==================== PLACED LAYER & ITEMS ==================== */
.placed-layer{ position:absolute; inset:0; width:100vw; height:var(--vh); pointer-events: none; z-index: 120; }
.placed-item{
  position:absolute; width:100px; height:100px; transform: translate(-50%, -50%) rotate(0deg);
  transform-origin: calc(100% + 40px) 50%; cursor:pointer; pointer-events:auto;
}
.placed-item img{ width:100%; height:100%; object-fit:contain; user-select:none; -webkit-user-drag:none; filter: none; transition: filter .15s ease; }
.placed-item.selected > img{
  filter: drop-shadow(0 0 0 rgba(0,0,0,.70)) drop-shadow(0 0 2px rgba(0,0,0,.70)) drop-shadow(0 0 10px rgba(0,0,0,.22));
}
.placed-item.blend-multiply { mix-blend-mode: multiply; }

/* ==================== MULTIFUNCTION BAR ==================== */
.multi-bar{
  position:fixed; left:50%; top:119px; transform:translateX(-50%);
  display:flex; align-items:center; gap:16px; padding:6px 8px;
  background: #e8e8e6; border: 1px solid black; border-radius:30px; box-shadow:none; z-index:1000; font-family:'Jost', sans-serif;
}
.multi-bar.hidden{ display:none; }
.mf-btn{ width:40px; height:40px; border-radius:50%; border:none; background:transparent; box-shadow:none; font-size:20px; line-height:1; cursor:pointer; }
.mf-btn:hover{ box-shadow: inset 0 0 5px 2px black; }
.mf-total{ min-width:100px; padding:4px 8px; border-radius:12px; background:transparent; border:1px solid black; box-shadow:none; font-weight:600; text-align:center; font-family:'Jost', sans-serif; }
.mf-purchase{
  padding:6px 12px; border-radius:30PX; text-decoration:none; color:black; background:transparent; border:none; box-shadow:none; font-weight:600; font-family:'Jost', sans-serif;
}
.mf-purchase:hover{ box-shadow: inset 0 0 5px 2px black; }

/* ==================== RESPONSIVE ==================== */
@media (max-width: 1536px) and (min-width: 1000px){
  :root{
    --panel-left: 90px; --panel-side-gap: 12px; --col-gap: 28px; --image-max: 560px; --text-max: 220px; --video-max: 360px;
    --text-gap: 70px; --h2-size: clamp(40px, 5.2vw, 58px); --desc-size: clamp(13px, 1vw, 15px); --sub-size: clamp(12px, 0.95vw, 14px);
    --video-top-margin: 40px; --obj-left: 30px; --obj-gap: 240px; --obj-size: 54px; --obj-font: 20px; --color-gap: 60px;
  }
  .object-button-column { top: 55%; }
  .popup-header{ gap: 15px; }
  .popup-header-wrapper{ padding: 12px 30px 0; }
  .popup-divider{ margin: 14px 0; }
  .popup-body{ padding: 0 30px 26px; }
  .popup-body-content{ grid-template-columns: minmax(0, 50vw) minmax(0, 18vw) minmax(0, 32vw); gap: var(--col-gap); }
  .popup-image-wrapper img{ max-width: var(--image-max); max-height: min(62vh, var(--image-max)); }
  .popup-video-mask{ width: clamp(190px, min(25vw, 38vh), var(--video-max)); max-height: 38vh; }
  .video-btn{ width: 52px; height: 52px; }
  .popup-text-wrapper{ max-width: min(var(--text-max), 16vw); gap: var(--text-gap); font-size: clamp(11px, 0.85vw, 15px); line-height: 1.4; }
  .popup-title-inner p{ margin-top: 2px; }
  .color-group { margin-top: -20px; }
  .popup-video-wrapper{ margin-right: 20px; gap: 18px; align-items: center; }
  .place-btn-wrapper{ margin-top: -6px; width: 100%; display: flex; justify-content: center; }
  .place-btn{ font-size: clamp(11px, 2.6vw, 13px); padding: clamp(8px, 0.7vw, 12px) clamp(18px, 1.6vw, 28px); max-width: 100%; white-space: nowrap; }
  .multi-bar{ top:88px; gap:12px; padding:4px 6px; }
  .mf-btn{ width:36px; height:36px; font-size:18px; }
  .mf-total{ min-width:90px; }
  .mf-purchase{ padding:6px 10px; }
}

@media (max-width: 1024px){
  :root{
    --panel-left: 78px; --panel-side-gap: 8px; --col-gap: 24px; --image-max: 520px; --text-max: 240px; --video-max: 320px;
    --text-gap: 40px; --h2-size: clamp(36px, 5.5vw, 52px); --desc-size: clamp(13px, 1.2vw, 15px); --sub-size: clamp(12px, 1.1vw, 14px);
    --video-top-margin: 28px; --obj-left: 16px; --obj-gap: 200px; --obj-size: 50px; --obj-font: 18px; --color-gap: 26px;
  }
  .popup-body-content{ grid-template-columns: minmax(0, 48vw) minmax(0, 24vw) minmax(0, 28vw); }
}

/* ==================== ≤768px ==================== */
@media (max-width: 768px){
  :root{
    --panel-left: 56px; --panel-side-gap: 6px;
    --mobile-gutter: clamp(6px, 3vw, 12px);
    --content-w: calc(100vw - var(--panel-left) - var(--panel-side-gap) - (2 * var(--mobile-gutter)));
    --image-max: min(92vw, var(--content-w));
    --text-max: min(92vw, var(--content-w));
    --video-max: min(70vw, var(--content-w));
    --text-gap: 22px; --h2-size: clamp(24px, 7.8vw, 34px); --desc-size: clamp(12.5px, 3.2vw, 14px); --sub-size: clamp(11.5px, 3.1vw, 13.5px);
    --obj-left: 10px; --obj-gap: 200px; --obj-size: 46px; --obj-font: 16px; --color-gap: 18px; --text-nudge: clamp(24px, 10vw, 56px);
  }
  .popup-panel{
    position: fixed; left: var(--panel-left); top: 0;
    width: calc(100vw - var(--panel-left) - var(--panel-side-gap));
    height: 100svh; overflow-y: auto; overflow-x: hidden;
    -webkit-overflow-scrolling: touch; overscroll-behavior: contain;
    border: 0; box-shadow: 0 1px 6px rgba(0,0,0,.18); box-sizing: border-box;
  }
  .popup-header-wrapper{ padding: 12px var(--mobile-gutter) 0; }
  .popup-body{ padding: 0 var(--mobile-gutter) 18px; }

  .object-button-column{
    position: fixed; top: 56svh; left: var(--obj-left);
    transform: translateY(-50%); z-index: 90; gap: var(--obj-gap);
  }
  .object-btn{ width: var(--obj-size); height: var(--obj-size); font-size: var(--obj-font); }

  .popup-header{ display:flex; flex-direction:column; align-items:flex-start; gap:8px; }
  .popup-title{ order:-1; flex:unset; width:100%; justify-content:flex-start; }
  .popup-title-inner h2{ font-size: var(--h2-size); line-height:1.06; }
  .popup-title-inner p{ font-size: var(--sub-size); }
  .popup-description{ font-size: var(--desc-size); max-width: calc(var(--text-max) - var(--text-nudge)); width:100%; line-height:1.45; margin-left: var(--text-nudge); }
  .popup-divider{ margin:12px 0; }

  .popup-body-content{ display:flex !important; flex-direction:column; align-items:center; gap:24px; }
  .popup-image-wrapper{ order:1; width:100%; max-width: var(--image-max); margin-inline:auto; }
  .popup-image-wrapper img{ width:100%; max-width: var(--image-max); max-height: min(48svh,560px); object-fit:contain; }
  .popup-text-wrapper{
    order:2; width:100%; max-width: calc(var(--text-max) - var(--text-nudge));
    margin-left: var(--text-nudge); margin-right:auto; padding-left: clamp(4px, 1.5vw, 10px); padding-right: clamp(6px, 2vw, 12px);
    box-sizing: border-box; gap: var(--text-gap); font-size: clamp(11.5px, 3.1vw, 14.5px); line-height: 1.42; text-align:left; align-items:flex-start;
    overflow-wrap:anywhere; word-break: break-word;
  }
  .popup-text-wrapper .text-block{ width:100%; text-align:inherit; }
  .text-block.bold1{ font-size: clamp(10.5px, 2.9vw, 13px); }

  .popup-video-wrapper{ order:3; margin-top:8px; margin-right:0; gap:16px; align-items:center; width:100%; max-width: var(--video-max); margin-inline:auto; }
  .popup-video-mask{ width: min(clamp(220px, 64vw, 360px), var(--content-w)); max-width:100%; aspect-ratio:1/1; }
  .video-btn{ width: clamp(40px, 11vw, 54px); height: clamp(40px, 11vw, 54px); }
  .color-group{ width:100%; margin-top:-6px; }
  .color-label{ margin-left:6px; margin-bottom:-2px; }
  .popup-video-buttons{ gap: max(18px, 4vw); margin-top:4px; }
  .place-btn{ font-size:14px; padding:10px 28px; }
  .place-btn-wrapper{ margin-top: 6px; }

  /* >>> MULTI-BAR */
  #multi-bar.multi-bar{
    top: calc(180px + env(safe-area-inset-top, 0px));
    left: 50%; right: auto; transform: translateX(-50%);
    gap: 10px; padding: 45px 1px;
  }
  .mf-btn{ width:32px; height:32px; font-size:18px; border-radius:10px; }
  .mf-total{ min-width:76px; font-size:14px; padding:2px 6px; }
  .mf-purchase{ padding:4px 8px; font-size:14px; border-radius:14px; }
}

/* ==================== ≤480px ==================== */
@media (max-width: 480px){
  :root{ --obj-gap: 210px; --obj-size: 42px; --obj-font: 15px; --image-max: min(94vw, var(--content-w)); --video-max: min(74vw, var(--content-w)); }
  .object-button-column{ top:56svh; transform: translateY(-50%); }
  .popup-video-buttons{ gap: max(14px, 5vw); }

  /* >>> MULTI-BAR: move RIGHT */
  #multi-bar.multi-bar{
    left: auto; right: 37px; transform: none;
    top: calc(90px + env(safe-area-inset-top, 0px)); gap: 8px; padding: 6px 1px;
  }
  .mf-btn{ width:30px; height:30px; font-size:13px; }
  .mf-total{ min-width:70px; font-size:13px; }
  .mf-purchase{ font-size:13px; padding:4px 8px; }
}

/* ==================== LOOKBOOK ==================== */


.popup-iv{
  transform-origin: right center !important;
}


.lookbook-btn{
  position: fixed;
  right: 16px;
  bottom: 16px;
  z-index: 95;
  padding: 6px 12px !important;
  min-width: 84px;
  border-radius: 20px;
  border: none;
  background: transparent;
  color: #000;
  font: 600 12px/1 'Jost', sans-serif !important;
  letter-spacing: .02em;
  box-shadow: 0 2px 10px rgba(0,0,0,.1);
  cursor: pointer;
  transition: box-shadow .2s ease, opacity .3s ease;
  opacity: 0; pointer-events: none;
}
.lookbook-btn:hover{ box-shadow: inset 0 0 5px 2px black; }
.lookbook-btn.visible{ opacity: 1; pointer-events: auto; }


.popup-iv .popup-header{ 
  display:flex; flex-direction:column; align-items:flex-start; text-align:left;
  gap: 6px;
}
.popup-iv .popup-title{ width:100%; }
.popup-iv .popup-title-inner h2{ margin:0; }
.popup-iv .popup-title-inner p{
  margin:0;
  font-size: clamp(11px, .85vw, 13px);
  line-height: 1.4;
  max-width: min(720px, 75%);
  opacity:.9;
  word-break: break-word;
}


.popup-iv .popup-body-content.iv{
  --iv-gap: clamp(16px, 2.4vw, 28px);
  --iv-box: min(34vw, 440px);           /* a bit smaller so nothing overflows */
  display: grid !important;
  grid-template-columns: 1fr 1fr;
  gap: var(--iv-gap);
  justify-content: center;
  align-items: start;
}

/* Equal tiles; center contents perfectly; no unexpected borders */
.popup-iv .iv-image-wrapper,
.popup-iv .iv-video-wrapper{
  width: var(--iv-box);
  aspect-ratio: 3 / 4;
  border: 1px solid rgba(0,0,0,.15);
  border-radius: 10px;
  background: rgba(255,255,255,.35);
  overflow: hidden;
  margin: 0 auto;
  display: grid;                 /* grid centering is bulletproof */
  place-items: center;
  padding: clamp(8px, .8vw, 12px);
  box-sizing: border-box;
}

/* Remove any light inner panel/border the video might inherit */
.popup-iv .iv-video-wrapper{
  border: 0 !important;
  background: transparent !important;
  box-shadow: none !important;
}

/* Media: show full artwork, centered exactly */
.popup-iv .iv-img,
.popup-iv .iv-video{
  width: 100%;
  height: 100%;
  object-fit: contain !important;
  object-position: center center !important;
  display: block;
}

/* Hover swap for the image */
.popup-iv .iv-img.hover{ opacity: 0; transition: opacity .25s ease; }
.popup-iv .iv-image-wrapper:hover .iv-img.hover{ opacity: 1; }
.popup-iv .iv-image-wrapper:hover .iv-img.primary{ opacity: 0; }

/* Minimize line (keep low/right with safe-area protection) */
.popup-iv .iv-minimize{
  position: absolute;
  right: max(12px, env(safe-area-inset-right, 0px));
  bottom: max(10px, env(safe-area-inset-bottom, 0px) + 8px);
  width: 44px; height: 4px; border-radius: 2px;
  background: #000; opacity:.85; cursor:pointer; border:none;
}
.popup-iv .iv-minimize:hover{ opacity:1; }

/* ---------- Mobile & small tablets ---------- */
@media (max-width: 900px){
  .popup-iv .popup-header-wrapper{ padding: 12px var(--mobile-gutter, 14px) 0; }
  .popup-iv .popup-body{ padding: 0 var(--mobile-gutter, 14px) calc(14px + env(safe-area-inset-bottom,0px)); }

  .popup-iv .popup-body-content.iv{
    grid-template-columns: 1fr;
    place-items: center;
    --iv-max-w: min(100%, 560px);
    --iv-max-h: min(56vh, 500px);
  }

  .popup-iv .iv-image-wrapper,
  .popup-iv .iv-video-wrapper{
    width: var(--iv-max-w);
    height: var(--iv-max-h);
    padding: clamp(8px, 2.2vw, 12px);
  }

  .lookbook-btn{
    right: 14px; bottom: 14px;
    padding: 6px 12px !important;
    min-width: 78px;
    font-size: 12px !important;
    border-radius: 18px;
  }
}

@media (max-width: 380px){
  .popup-iv .popup-body-content.iv{ --iv-max-h: min(50vh, 440px); }
}
