/* Base layout unchanged from your latest, but trimmed for safety */

html, body { margin:0; padding:0; height:100%; overflow:hidden; font-family:'Jost',sans-serif; }
:root { --vh: 100vh; }
@supports (height: 100svh){ :root { --vh: 100svh; } }

:root{
  --panel-left:110px; --panel-side-gap:16px; --panel-w:calc(100% - var(--panel-left) - var(--panel-side-gap));
  --col-gap:40px; --image-max:640px; --text-max:270px; --video-max:400px; --text-gap:72px;
  --h2-size:72px; --desc-size:16px; --sub-size:16px; --video-top-margin:50px;
  --obj-left:30px; --obj-gap:330px; --obj-size:60px; --obj-font:24px; --color-gap:50px;
}

/* Panels */
.popup-panel{
  position:absolute; left:var(--panel-left); top:0; width:var(--panel-w); height:100%;
  background:linear-gradient(to bottom, rgba(232,230,230,.8), rgba(232,230,230,.4));
  border:1px solid rgba(0,0,0,.3); box-shadow:0 1px 8px rgba(0,0,0,.25);
  backdrop-filter: blur(1px) saturate(100%); -webkit-backdrop-filter: blur(1px) saturate(100%);
  transform:scaleX(0); transform-origin:left center; opacity:0; transition:transform .4s ease, opacity .4s ease;
  z-index:1001; padding:0; display:flex; flex-direction:column; border-radius:12px; pointer-events:none;
}
.popup-panel.active{ transform:scaleX(1); opacity:1; pointer-events:auto; }
.popup-header-wrapper{ width:100%; padding:20px 40px 0; box-sizing:border-box; }
.popup-header{ display:flex; justify-content:space-between; align-items:flex-start; gap:40px; }
.popup-description{ font-size:var(--desc-size); max-width:420px; line-height:1.5; text-align:left; }
.popup-panel:not(.popup-iv) .popup-title{ flex:1; display:flex; justify-content:flex-end; }
.popup-title-inner{ margin-top:8px; text-align:left; }
.popup-title-inner h2{ font-size:var(--h2-size); font-weight:700; margin:0; }
.popup-title-inner p{ font-size:var(--sub-size); margin:4px 0 0; }
.popup-divider{ height:1px; background:#000; width:100%; margin:24px 0; flex-shrink:0; }
.popup-body{ flex:1; display:flex; padding:0 40px 40px; box-sizing:border-box; flex-direction:column; }
.popup-body-content{ display:grid; grid-template-columns:minmax(0,640px) minmax(0,1fr) minmax(0,400px); align-items:start; gap:var(--col-gap); flex:1; overflow:hidden; }

/* Left image */
.popup-image-wrapper{ position:relative; z-index:0; overflow:hidden; max-width:var(--image-max); }
.popup-image-wrapper::before{
  content:""; position:absolute; inset:0; z-index:-1;
  background-image:repeating-linear-gradient(to bottom, rgba(232,230,230,.06) 0px, rgba(232,230,230,.06) 2px, transparent 2px, transparent 6px);
  background-size:100% 6px; box-shadow: inset 0 0 20px rgba(255,255,255,.08), inset 0 0 40px rgba(255,255,255,.05);
  pointer-events:none;
}
.popup-image-wrapper img{ width:100%; max-width:var(--image-max); object-fit:contain; }
.glow-image{ filter: drop-shadow(0 0 2px rgba(0,0,0,.2)) drop-shadow(0 0 4px rgba(0,0,0,.15)) drop-shadow(0 0 8px rgba(0,0,0,.1)); }

/* Center text */
.popup-text-wrapper{
  max-width:min(var(--text-max), 22vw);
  font-size:clamp(12px, 1vw, 18px);
  line-height:1.5; display:flex; flex-direction:column; justify-content:flex-start; padding-top:0; padding-bottom:25px;
  gap:var(--text-gap); z-index:10; position:relative; color:#000; word-break:break-word; overflow-wrap:break-word;
}
.text-block{ font-size:inherit; line-height:inherit; color:#000; }
.text-block.bold{ font-weight:700; }
.text-block.bold1{ font-size:clamp(11px,.9vw,14px); font-weight:700; }

/* Right video + colors */
.popup-video-wrapper{ display:flex; flex-direction:column; align-items:center; justify-content:flex-start; margin-top:var(--video-top-margin); gap:20px; margin-right:37px; }
.popup-video-mask{
  width: clamp(150px, 20vw, var(--video-max));
  aspect-ratio:1/1; border-radius:50%; overflow:hidden; border:1px solid #000;
  display:flex; align-items:center; justify-content:center; position:relative;
}
.popup-video-mask video{ width:500px; height:500px; object-fit:cover; transform:translate(-10px,-40px); display:none; }
.popup-video-mask video.active{ display:block; }

.color-group{ display:flex; flex-direction:column; align-items:center; gap:8px; width:100%; margin-top:-6px; }
.color-label{ font-family:'Jost',sans-serif; font-size:14px; font-weight:700; color:#000; align-self:flex-start; margin-left:10px; margin-bottom:-2px; }
.popup-video-buttons{ display:flex; gap:var(--color-gap); justify-content:center; }
.video-btn{ position:relative; width:60px; height:60px; border-radius:50%; overflow:hidden; padding:0; background:none; cursor:pointer; transition: box-shadow .2s; }
.video-btn img{ width:100%; height:100%; object-fit:cover; display:block; pointer-events:none; transition: filter .3s; }
.video-btn:hover img{ filter:brightness(.75); }
.video-btn:hover::after{ content:""; position:absolute; inset:0; border-radius:50%; box-shadow: inset 0 0 5px 2px #000; pointer-events:none; }

/* PLACE */
.place-btn-wrapper{ margin-top:36px; display:flex; justify-content:center; width:100%; }
.place-btn{ padding:12px 36px; font-size:16px; font-weight:600; font-family:'Jost',sans-serif; color:#000; background:transparent; border:none; border-radius:28px; box-shadow:0 2px 10px rgba(0,0,0,.1); cursor:pointer; transition: box-shadow .2s; }
.place-btn:hover{ box-shadow: inset 0 0 5px 2px #000; }
.place-btn:focus-visible{ outline:2px solid rgba(0,0,0,.5); outline-offset:2px; }

/* Left navigator */
.object-button-column{ position:absolute; top:50%; left:var(--obj-left); transform:translateY(-50%); display:flex; flex-direction:column; gap:var(--obj-gap); z-index:90; opacity:0; transition:opacity 1s; }
.object-btn{ width:var(--obj-size); height:var(--obj-size); border-radius:50%; border:none; font-size:var(--obj-font); background:#e8e8e6; box-shadow:0 2px 10px rgba(0,0,0,.1); display:flex; align-items:center; justify-content:center; cursor:pointer; }
.object-btn:hover{ box-shadow: inset 0 0 5px 2px #000; }

/* Grid / typewriter */
.dot-grid{ display:grid; grid-template-columns:repeat(auto-fill,10px); grid-template-rows:repeat(auto-fill,10px); opacity:0; pointer-events:none; position:absolute; top:0; left:0; width:100vw; height:var(--vh); z-index:0; transition:opacity 2s; }
.dot-cell{ width:10px; height:10px; display:flex; align-items:center; justify-content:center; }
.dot-visual{ width:6px; height:6px; background:#000; border-radius:50%; opacity:.7; }
.center-wrapper{ position:absolute; top:0; left:0; width:100vw; height:var(--vh); display:flex; flex-direction:column; align-items:center; justify-content:center; z-index:10; pointer-events:none; gap:20px; }
.typewriter-text-p{ font-size:20px; text-align:center; white-space:nowrap; overflow:hidden; max-width:90vw; }
.image-sequence-p{ display:none; position:relative; width:500px; height:500px; max-width:80vw; max-height:80vh; overflow:hidden; }
.image-sequence-p img{ position:absolute; top:50%; left:50%; width:100%; height:100%; object-fit:contain; transform:translate(-50%,-50%); opacity:0; transition:opacity .6s; }

/* Placed items */
.placed-layer{ position:absolute; inset:0; width:100vw; height:var(--vh); pointer-events:none; z-index:120; }
.placed-item{ position:absolute; width:100px; height:100px; transform:translate(-50%,-50%) rotate(0deg); transform-origin:calc(100% + 40px) 50%; cursor:pointer; pointer-events:auto; }
.placed-item img{ width:100%; height:100%; object-fit:contain; user-select:none; -webkit-user-drag:none; transition: filter .15s; }
.placed-item.selected > img{ filter: drop-shadow(0 0 0 rgba(0,0,0,.70)) drop-shadow(0 0 2px rgba(0,0,0,.70)) drop-shadow(0 0 10px rgba(0,0,0,.22)); }
.placed-item.blend-multiply{ mix-blend-mode:multiply; }

/* Multi bar */
.multi-bar{ position:fixed; left:50%; top:119px; transform:translateX(-50%); display:flex; align-items:center; gap:16px; padding:6px 8px; background:#e8e8e6; border:1px solid #000; border-radius:30px; z-index:1000; }
.multi-bar.hidden{ display:none; }
.mf-btn{ width:40px; height:40px; border-radius:50%; border:none; background:transparent; font-size:20px; cursor:pointer; }
.mf-btn:hover{ box-shadow: inset 0 0 5px 2px #000; }
.mf-total{ min-width:100px; padding:4px 8px; border-radius:12px; background:transparent; border:1px solid #000; font-weight:600; text-align:center; }
.mf-purchase{ padding:6px 12px; border-radius:30px; text-decoration:none; color:#000; background:transparent; font-weight:600; }
.mf-purchase:hover{ box-shadow: inset 0 0 5px 2px #000; }

/* LOOKBOOK button (never inherits .object-btn) */
.lookbook-btn{
  position:fixed; right:22px; bottom:22px; z-index:95;
  display:inline-flex; align-items:center; justify-content:center;
  padding:8px 16px; min-width:92px; border-radius:22px;
  background:transparent; color:#000; font:600 13px/1 'Jost',sans-serif; letter-spacing:.02em;
  box-shadow:0 2px 10px rgba(0,0,0,.1); cursor:pointer; transition: box-shadow .2s, opacity .3s;
  opacity:0; pointer-events:none;
}
.lookbook-btn.visible{ opacity:1; pointer-events:auto; }
.lookbook-btn:hover{ box-shadow: inset 0 0 5px 2px #000; }

/* LOOKBOOK panel specifics */
.popup-panel.popup-iv{ transform-origin:right center; }
.popup-iv .popup-header{ display:flex; flex-direction:column; align-items:flex-start; justify-content:center; gap:8px; text-align:left; }
.popup-iv .popup-title{ width:100%; display:block; }
.popup-iv .popup-title-inner h2{ margin:0; }
.popup-iv .popup-title-inner p{ margin:.25rem 0 0; font-size:clamp(11px,.9vw,13px); line-height:1.35; max-width:760px; opacity:.9; word-break:break-word; }

.popup-iv .popup-body-content.iv{
  --iv-gap:clamp(16px, 2.8vw, 28px);
  --iv-box:min(34vw, 440px);
  display:grid !important; grid-template-columns:1fr 1fr; gap:var(--iv-gap); align-items:start; justify-content:center;
}
.popup-iv .iv-image-wrapper, .popup-iv .iv-video-wrapper{
  width:var(--iv-box); aspect-ratio:4/3; margin:0 auto; display:flex; align-items:center; justify-content:center;
  background:transparent; border:0; padding:0; box-shadow:none; overflow:hidden; border-radius:10px;
}
.popup-iv .iv-img, .popup-iv .iv-video{ width:100%; height:100%; display:block; object-fit:contain; object-position:center; background:transparent; border:0; outline:0; }
.popup-iv .iv-img.hover{ opacity:0; transition:opacity .25s; }
.popup-iv .iv-image-wrapper:hover .iv-img.hover{ opacity:1; }
.popup-iv .iv-image-wrapper:hover .iv-img.primary{ opacity:0; }

.popup-iv .iv-minimize{
  position:absolute; right:18px; bottom:clamp(10px, 2.5vh, 16px); width:46px; height:4px; border-radius:2px; background:#000; opacity:.85; cursor:pointer; border:0;
}
.popup-iv .iv-minimize:hover{ opacity:1; }

/* Responsive bits kept as before (shortened) */
@media (max-width: 900px){
  .popup-iv .popup-body-content.iv{ grid-template-columns:1fr; --iv-box:min(92vw, 520px); place-items:center; }
  .popup-iv .iv-image-wrapper, .popup-iv .iv-video-wrapper{ width:var(--iv-box); aspect-ratio:4/3; }
  .lookbook-btn{ right:16px; bottom:16px; padding:7px 14px; min-width:80px; border-radius:20px; font-size:12px; }
}
@media (max-width: 768px){
  .popup-panel{ position:fixed; left:var(--panel-left); top:0; width:calc(100vw - var(--panel-left) - var(--panel-side-gap)); height:100svh; overflow-y:auto; overflow-x:hidden; border:0; box-shadow:0 1px 6px rgba(0,0,0,.18); }
}
